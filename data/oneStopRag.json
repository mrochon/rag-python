{
    "title": "Creates a completion based on Azure Search vector data, previous assistant message and user-assigned managed identity.",
    "parameters": {
      "endpoint": "{endpoint}",
      "api-version": "2024-02-01",
      "deployment-id": "<deployment-id>",
      "body": {
        "messages": [
          {
            "role": "user",
            "content": "can you tell me how to care for a cat?"
          },
          {
            "role": "assistant",
            "content": "Content of the completion [doc1].",
            "context": {
              "intent": "cat care"
            }
          },
          {
            "role": "user",
            "content": "how about dog?"
          }
        ],
        "data_sources": [
          {
            "type": "azure_search",
            "parameters": {
              "endpoint": "https://your-search-endpoint.search.windows.net/",
              "authentication": {
                "type": "user_assigned_managed_identity",
                "managed_identity_resource_id": "/subscriptions/{subscription-id}/resourceGroups/{resource-group}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{resource-name}"
              },
              "index_name": "{index name}",
              "query_type": "vector",
              "embedding_dependency": {
                "type": "deployment_name",
                "deployment_name": "{embedding deployment name}"
              },
              "in_scope": true,
              "top_n_documents": 5,
              "strictness": 3,
              "role_information": "You are an AI assistant that helps people find information.",
              "fields_mapping": {
                "content_fields_separator": "\\n",
                "content_fields": [
                  "content"
                ],
                "filepath_field": "filepath",
                "title_field": "title",
                "url_field": "url",
                "vector_fields": [
                  "contentvector"
                ]
              }
            }
          }
        ]
      }
    }
  }